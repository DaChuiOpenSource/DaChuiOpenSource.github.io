(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{346:function(a,s,t){"use strict";t.r(s);var r=t(12),e=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"_1-apache-kafka基本知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-apache-kafka基本知识"}},[a._v("#")]),a._v(" 1. Apache Kafka基本知识")]),a._v(" "),s("h2",{attrs:{id:"_1-1-kafka是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-kafka是什么"}},[a._v("#")]),a._v(" 1.1. Kafka是什么")]),a._v(" "),s("p",[a._v("Kafka是一个分布式的实时事件流开源平台，被成千上万的公司用于高性能数据处理、实时流分析、数据集成和关键任务应用。80%的财富100强信任和在使用Kafka。")]),a._v(" "),s("h3",{attrs:{id:"_1-1-1-事件流是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-事件流是什么"}},[a._v("#")]),a._v(" 1.1.1. 事件流是什么")]),a._v(" "),s("p",[a._v("事件流可以看成是人体中枢神经系统的数字化等价物，就像每条神经一样，是万物互联的技术基础。越来越多的业务由软件定义且自动化，软件用户是更多的软件。")]),a._v(" "),s("h3",{attrs:{id:"_1-1-2-事件流可以做什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-事件流可以做什么"}},[a._v("#")]),a._v(" 1.1.2. 事件流可以做什么")]),a._v(" "),s("p",[a._v("在各行业和组织中，事件流有很多应用案例。包括：")]),a._v(" "),s("ul",[s("li",[a._v("实时处理支付（Payments ）和金融交易（Financial transactions），比如证券交易所、银行和保险。")]),a._v(" "),s("li",[a._v("实时跟踪和监控汽车、卡车、车队、轮船，比如在物流和汽车行业。")]),a._v(" "),s("li",[a._v("持续从物联网或其他设备捕获和分析传感器数据，比如工厂和风电场。")]),a._v(" "),s("li",[a._v("搜集并快速响应用户交互及订单，比如零售、旅店、旅游行业和移动应用。")]),a._v(" "),s("li",[a._v("检测住院病人和预测病情变化，确保在突发情况下及时治疗。")]),a._v(" "),s("li",[a._v("连接、存储、提供不同部门产生的数据。")]),a._v(" "),s("li",[a._v("作为数据平台、事件驱动架构和微服务的基础。")])]),a._v(" "),s("h2",{attrs:{id:"_1-2-kafka的关键能力"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-kafka的关键能力"}},[a._v("#")]),a._v(" 1.2. Kafka的关键能力")]),a._v(" "),s("ol",[s("li",[s("strong",[a._v("发布")]),a._v("（写）和"),s("strong",[a._v("订阅")]),a._v("（读）事件流，包括从其他系统持续的导出和导入数据。")]),a._v(" "),s("li",[a._v("持久、可靠的"),s("strong",[a._v("存储")]),a._v("事件流。")]),a._v(" "),s("li",[a._v("事件发生时"),s("strong",[a._v("处理")]),a._v("事件流或后处理事件流。")])]),a._v(" "),s("p",[a._v("所有这些功能都是以分布式、高扩展、弹性、容错、安全方式提供。")]),a._v(" "),s("h2",{attrs:{id:"_1-3-kafka如何工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-kafka如何工作"}},[a._v("#")]),a._v(" 1.3. Kafka如何工作")]),a._v(" "),s("p",[a._v("Kafka是由服务端和客户端组成的分布式系统，前后端通过高性能的TCP通讯协议。可以部署于本地或云环境中的裸机硬件、虚拟机、容器。"),s("br"),a._v(" "),s("strong",[a._v("服务端")]),a._v("以一个或多个服务组成的集群方式在运行，可以跨多个数据中心或云区域。有些服务组成存储层，叫做代理。其他服务运行Kafka Connect来持续导入或导出数据，作为事件流于已有系统进行整合，如关系型数据库或其他Kafka集群。为了实现关键任务用例，Kafka集群是高度弹性和容错的。如果集群中任何一个服务挂掉，其他服务会立即取代工作来保证数据不丢失情况下的持续运行。"),s("br"),a._v(" "),s("strong",[a._v("客户端")]),a._v("允许编写分布式应用和微服务，以并行、可伸缩、容错方式读取、写入、处理事件流，即使遇到网络问题或机器故障。Kafka附带了一些客户端，由社区数十位客户提供补充。客户端适用于Java和Scala，包括针对Go、Python、C/C++和其他编程语言的高级别流库，同样支持REST APIs。")]),a._v(" "),s("h2",{attrs:{id:"_1-4-kafka用途"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-kafka用途"}},[a._v("#")]),a._v(" 1.4. Kafka用途")]),a._v(" "),s("p",[a._v("下面是一些Kafka常见用途的描述。包括：")]),a._v(" "),s("h3",{attrs:{id:"_1-4-1-消息传递"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-消息传递"}},[a._v("#")]),a._v(" 1.4.1. 消息传递")]),a._v(" "),s("p",[a._v("相对于传统的消息代理，Kafka是一个很好的替代。消息代理常用于将处理与数据提供方解耦、缓存未处理的消息等。相对于大多数的消息处理系统，Kafka具有更好的吞吐量、内建分区、复制、容错等，这使其成为大型消息处理应用程序的良好解决方案。"),s("br"),a._v("\n在这个领域，传统的消息处理系统有ActiveMQ、RabbitMQ.")]),a._v(" "),s("h3",{attrs:{id:"_1-4-2-网站活动跟踪"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-网站活动跟踪"}},[a._v("#")]),a._v(" 1.4.2. 网站活动跟踪")]),a._v(" "),s("p",[a._v("Kafka最初用例是能够将用户活动跟踪管道重建为一组实时发布-订阅源。这意味着像网页浏览、搜索及其他用户可能发生的活动被发布到中心主题（topic），每个活动类别对应一个主题。这些发布的源可用于广泛用途的订阅，包括实时处理、实时监控、实时加载入Hadoop或离线数据仓库系统用于离线处理或报告。"),s("br"),a._v("\n活动跟踪通常需要非常高的容量，因为伴随着每个用户浏览页面都会产生很多活动消息。")]),a._v(" "),s("h3",{attrs:{id:"_1-4-3-指标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-指标"}},[a._v("#")]),a._v(" 1.4.3. 指标")]),a._v(" "),s("p",[a._v("Kafka常用于运营数据的监控。它聚合来自分布式应用程序的统计数据，生成运营数据的集中指标。")]),a._v(" "),s("h3",{attrs:{id:"_1-4-4-日志归集"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-4-日志归集"}},[a._v("#")]),a._v(" 1.4.4. 日志归集")]),a._v(" "),s("p",[a._v("许多人将Kafka作为日志归集解决方案的替代者。日志归集就是从服务器搜集物理日志文件，然后将文件放在一个文件服务器或HDFS等集中的地方。Kafka将日志或事件数据抽象为消息流，允许低延迟的处理、更容易支持多数据源和分布式数据消费。相对于传统的Scribe、Flume，Kafka可以提供同样好的性能，更强的持久性、更低的端到端延迟。")]),a._v(" "),s("h3",{attrs:{id:"_1-4-5-流处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-5-流处理"}},[a._v("#")]),a._v(" 1.4.5. 流处理")]),a._v(" "),s("p",[a._v("很多用户在多个阶段组成的处理管道中处理数据，原始输入数据从topic中取出（消费），然后聚合、丰富、其他方式转换后放入（发布）新的topic，供后续处理阶段进一步的消费。")]),a._v(" "),s("p",[a._v("除了Kafka流，可以选择的开源流处理工具有Apache Storm、Apache Samza。")]),a._v(" "),s("h3",{attrs:{id:"_1-4-6-事件溯源"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-6-事件溯源"}},[a._v("#")]),a._v(" 1.4.6. 事件溯源")]),a._v(" "),s("p",[a._v("事件溯源是一种应用程序设计风格，状态变化以时间排序的方式进行记录。由于能够支持非常大的日志数据存储，使它成为此风格应用程序的出色支撑。")]),a._v(" "),s("h3",{attrs:{id:"_1-4-7-提交日志"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-7-提交日志"}},[a._v("#")]),a._v(" 1.4.7. 提交日志")]),a._v(" "),s("p",[a._v("Kafka可以作为分布式系统的一种外部提交日志。该日志有助于在不同节点之间复制数据，作为故障节点恢复数据的一种同步机制。Kafka的日志压缩功能有助于支持这一用法。在此应用方面，Kafka跟Apache BookKeeper相似。")]),a._v(" "),s("h2",{attrs:{id:"实践"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实践"}},[a._v("#")]),a._v(" 实践")]),a._v(" "),s("p",[a._v("下载最新版本的Kafka并解压")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("tar "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("xzf kafka_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("tgz\ncd kafka_2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("13")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("p",[a._v("启动Kafka环境")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("# Start the ZooKeeper service\nbin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("zookeeper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n\n# Start the Kafka broker service\nbin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])]),s("p",[a._v("创建Topic")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("topics"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("create "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic quickstart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("events "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server localhost"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v("\n\nbin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("topics"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("describe "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic quickstart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("events "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server localhost"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("p",[a._v("通过命令向Topic中写入数据")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic quickstart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("events "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server localhost"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("通过命令读取Topic数据")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("bin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("kafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("console"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("topic quickstart"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("events "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("from"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("beginning "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("--")]),a._v("bootstrap"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("server localhost"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9092")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("通过Kafka Connect导入或导出数据作为事件流")]),a._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[a._v("# 修改配置文件config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("standalone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\nplugin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("libs"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3.3")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v(".1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("jar\n\n# 执行\nbin"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("standalone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("sh config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("standalone"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("source"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties config"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("connect"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("file"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("sink"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("properties\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);