(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{331:function(s,a,t){"use strict";t.r(a);var r=t(12),e=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"oracle数据库备份与恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oracle数据库备份与恢复"}},[s._v("#")]),s._v(" Oracle数据库备份与恢复")]),s._v(" "),a("h2",{attrs:{id:"_1-备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-备份"}},[s._v("#")]),s._v(" 1. 备份")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--数据泵")]),s._v("\nexpdp "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"'/ as sysdba'\"")]),s._v(" directory"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dpdir "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("dumpfile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schema_qiyitest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp logfile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exp_"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("schema_qiyitest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log compression"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" schemas"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schemaname\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" all_users "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" common"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NO'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--linux exp、imp")]),s._v("\nexp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("passwd "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("oracle"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dpdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20180921")]),s._v("_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp owner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("oracle"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dpdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("exp_20180921_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--windows exp、imp")]),s._v("\nexp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("passwd"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@ipaddress")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1521")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("cd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20181008")]),s._v("_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp owner"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("cd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\\exp_20181008_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("注意：数据泵expdp备份前务必确认dpdir的路径(具体命令参考常用命令文章)\nselect directory_name,DIRECTORY_PATH from all_directories where directory_name='DPDIR';")])]),s._v(" "),a("h2",{attrs:{id:"_2-恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-恢复"}},[s._v("#")]),s._v(" 2. 恢复")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--数据泵")]),s._v("\nimpdp "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"'/ as sysdba'\"")]),s._v(" directory"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dpdir "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("dumpfile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("lczg_201910310928"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp remap_schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schemaname:schemaothername logfile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("impdp_"),a("span",{pre:!0,attrs:{class:"token identifier"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("date +%Y%m%d%H%M%S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\nimpdp "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"'/ as sysdba'\"")]),s._v(" directory"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dpdir cluster"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("no")]),s._v(" remap_schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schemaname:schemaothername "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("dumpfile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schema_qiyitest"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp logfile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("schema_qiyitest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("imp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" all_users "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" common"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'NO'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--linux exp、imp")]),s._v("\nimp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("passwd "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("oracle"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dpdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20181008")]),s._v("_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("full")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("y log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("home"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("oracle"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dpdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("imp_20181008_userlog\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--windows exp、imp")]),s._v("\nimp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("passwd"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@ipaddress")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1521")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("sid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("cd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("\\"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20181008")]),s._v("_user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dmp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("full")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("y "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ignore")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("y\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);